<html>
    <head>
        <title>MELHARFI 2D Game Engine - 18. SpriteSheet</title>
        <link rel="stylesheet" href="../../style.css">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>

        <link rel="stylesheet" href="../../highlight/styles/dracula.css">
        <script src="../../highlight/highlight.pack.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
    </head>
    <body>
        <!----NavigationBar---->
        <section id="nav-bar">
            <nav class="navbar navbar-expand-lg navbar-light">
                <a class="navbar-brand" href="#"><img src="../../img/logo.jpg"></a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
                  <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                  <div class="navbar-nav ml-auto">
                    <a class="nav-item nav-link" href="https://melharfi.github.io/index.html">HOME</a>
                    <a class="nav-item nav-link" href="https://melharfi.github.io/index.html"><b>REPOS</b></a>
                  </div>
                </div>
              </nav>
        </section>
        <!----Slider---->
        <div id="slider">
            <div id="headerSlider" class="carousel slide" data-ride="carousel">
                <ol class="carousel-indicators">
                  <li data-target="#headerSlider" data-slide-to="0" class="active"></li>
                  <li data-target="#headerSlider" data-slide-to="1"></li>
                  <li data-target="#headerSlider" data-slide-to="2"></li>
                </ol>
                <div class="carousel-inner">
                  <div class="carousel-item active">
                    <img src="../../img/1.jpg" class="d-block img-fluid w-100">
                    <div class="carousel-caption">
                      <h5>Welcome to The-Morpher Github Page</h5>
                    </div>
                  </div>
                  <div class="carousel-item">
                    <img src="../../img/2.jpg" class="d-block img-fluid w-100">
                    <div class="carousel-caption">
                      <h5>Love programming and discover new technologies</h5>
                    </div>
                  </div>
                  <div class="carousel-item">
                    <img src="../../img/3.jpg" class="d-block img-fluid w-100">
                    <div class="carousel-caption">
                      <h5>All my repos is shared</h5>
                    </div>
                  </div>
                  <div class="carousel-item">
                    <img src="../../img/4.jpg" class="d-block img-fluid w-100">
                    <div class="carousel-caption">
                      <h5>Feel free to give me a hint if anything need a tweak</h5>
                    </div>
                  </div>
                </div>
                <a class="carousel-control-prev" href="#headerSlider" role="button" data-slide="prev">
                  <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                  <span class="sr-only">Previous</span>
                </a>
                <a class="carousel-control-next" href="#headerSlider" role="button" data-slide="next">
                  <span class="carousel-control-next-icon" aria-hidden="true"></span>
                  <span class="sr-only">Next</span>
                </a>
              </div>
        </div>
        <!----Repos---->
        <section id="repos">
          <div class="container">
            <div class="row">
              <div class="col-md-10">
                <h2>Repos</h2>
                <div class="repos-content">
                  <div class="repos-content-job-title" style="color: darkcyan;">
                    <p><img src="https://raw.githubusercontent.com/melharfi/MELHARFI-2D-Game-Engine/master/assets/logo.png"></p>
                    <b>MELHARFI-2D-Game-Engine.</b>
                  </div>
                  <div class="repos-content-sub">
                    <p><a href="https://github.com/melharfi/MELHARFI-2D-Game-Engine" target="blank"><i class="fa fa-github" aria-hidden="true"></i>Got to repo.</a></p>
                    <p><b><h3>18. SpriteSheet</h3></b></p>
                    <p>Sprite Sheet is a picture that contain many peace of small graphics inside all drawn in the same file.</p>
                    <p><img src="assets/naruto.png">&nbsp;&nbsp;&nbsp;<img src="https://raw.githubusercontent.com/melharfi/MELHARFI-2D-Game-Engine/master/assets/choji.png"></p>
                    <p><img src="https://i.imgur.com/p3wyMEM.png"></p>
                    <p>The purpose for that is when you want to show a person walking, the old way is to store each frame as a single picture, and switch them one by one as we have seen in th chapter 06-Anim.
                    <p>The inconvenient is that you must create many files, they'll took more spaces.</p>
                    <p>It's not meant to be used only for an animation instance, but you still can merge all assets in one single file depending on the context, and then you pick only what you want using the <b>Rectangle position</b>.</p>
                    <p>To merge them you need to use a third party designing program as photoshop or specialy one for sprites, but you need to get the coordinates of each frame and store them somewhere to make sure you get the right frame you are looking for when you call it.</p>
                    <p><li><b>Finding the coordinates with "Dark Function"</li></b></p>
                    <p>I have found a handy tool that give me exactly what i want, Coordinate X, Y and Size width and Hight, and it can even merge many files into one sprite for you.</p>
                    <p>This tool is called "Dark Function" it's a Java application therefore you need to have a Java runtime on your computer, <a href="http://darkfunction.com/editor/">Link</a>.</p>
                    <p>It has the ability to auto detect a form and then you dont need select a rectangle yourself.</p>
                    <p>When you open your SpriteSheet, just double click inside the picture you want, and Dark Function well surround it with a delimited square, regrouping all pixels he found and stop when he no lounger find anything around.</p>
                    <p><img src="assets/darkFunction.PNG"></p>
                    <p>
                      <pre>
                        <code class="csharp">
using System;
using System.Drawing;
using System.Linq;
using System.Speech.Recognition;
using System.Windows.Forms;
using MELHARFI.Manager;
using MELHARFI.Manager.Gfx;

namespace _2dProject
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();

            Manager manager = new Manager(this, "CORE_ENGINE");
            manager.Background = Color.Blue;

            Rectangle rec1 = new Rectangle(new Point(0, 0), new Size(25, 53));
            Bmp parent = new Bmp(@"sprite.png", new Point(100, 100), rec1, manager);
            manager.ObjectLayer.Add(parent);
        }
    }
}
                        </code>
                      </pre>
                    </p>
                    <p><img src="img14.PNG"></p>
                    <p>Or use a specific overload of Bmp class : </p>
                    <p>
                      <pre>
                        <code class="csharp">
using System;
using System.Drawing;
using System.Linq;
using System.Speech.Recognition;
using System.Windows.Forms;
using MELHARFI.Manager;
using MELHARFI.Manager.Gfx;

namespace _2dProject
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();

            Manager manager = new Manager(this, "CORE_ENGINE");
            manager.Background = Color.Blue;

            Bmp parent = new Bmp(@"sprite.png", new Point(100, 100), new Rectangle(new Point(0, 0), new Size(25, 57)), manager);
            manager.ObjectLayer.Add(parent);
        }
    }
}
                        </code>
                      </pre>
                    </p>

                    <p>Now you have to find a way where to record the rectangle of each offset somewhere, you can achieve that with a function that store thoses informations in a list <b>OR</b> use a the 2 functions i just add for that purpose.</p>
                    <p><b><li>GetSpriteSheet & SetSpriteSheet</li></b></p>
                    <p><b>SetSpriteSheet </b> to push an offset's rectangle.</p>
                    <p><b>GetSpriteSheet </b> to pop up an offset's rectangle.</p>
                    

                    <p>
                      <pre>
                        <code class="csharp">
                          using System;
                          using System.Drawing;
                          using System.Linq;
                          using System.Speech.Recognition;
                          using System.Windows.Forms;
                          using MELHARFI.Manager;
                          using MELHARFI.Manager.Gfx;
                          using static MELHARFI.Manager.SpriteSheet;
                          
                          namespace _2dProject
                          {
                              public partial class Form1 : Form
                              {
                                  public static SpriteSheetData SSD = new SpriteSheetData();
                                  SpriteSheet spriteSheet = new SpriteSheet();
                                  public Form1()
                                  {
                                      InitializeComponent();
                                      Run();
                          
                                      Manager manager = new Manager(this, "CORE_ENGINE");
                                      manager.Background = Color.Blue;
                          
                                      Anim anim1 = new Anim(1, manager);
                                      anim1.AddCell("sprite.png", 0, 0, 0, spriteSheet.GetSpriteSheet("naruto", 0));
                                      anim1.AddCell("sprite.png", 1, 0, 0, spriteSheet.GetSpriteSheet("naruto", 1));
                                      anim1.AddCell("sprite.png", 2, 0, 0, spriteSheet.GetSpriteSheet("naruto", 2));
                                      anim1.AddCell("sprite.png", 3, 0, 0, spriteSheet.GetSpriteSheet("naruto", 3));
                                      anim1.Ini(Manager.TypeGfx.Object, false);
                                      anim1.Start();
                                      manager.ObjectLayer.Add(anim1);
                                  }
                          
                                  public void Run()
                                  {
                                      #region /////////// classe 1 Naruto 
                                      // direction right
                                      spriteSheet.SetSpriteSheet("naruto", 0, new Rectangle(new Point(0, 0), new Size(25, 53)));
                                      spriteSheet.SetSpriteSheet("naruto", 1, new Rectangle(new Point(33, 0), new Size(23, 54)));
                                      spriteSheet.SetSpriteSheet("naruto", 2, new Rectangle(new Point(66, 0), new Size(23, 53)));
                                      spriteSheet.SetSpriteSheet("naruto", 3, new Rectangle(new Point(99, 0), new Size(23, 54)));
                          
                                      // direction left
                                      spriteSheet.SetSpriteSheet("naruto", 4, new Rectangle(new Point(4, 57), new Size(18, 56)));
                                      spriteSheet.SetSpriteSheet("naruto", 5, new Rectangle(new Point(35, 59), new Size(21, 54)));
                                      spriteSheet.SetSpriteSheet("naruto", 6, new Rectangle(new Point(69, 58), new Size(18, 55)));
                                      spriteSheet.SetSpriteSheet("naruto", 7, new Rectangle(new Point(99, 59), new Size(21, 54)));
                          
                                      // direction up
                                      spriteSheet.SetSpriteSheet("naruto", 8, new Rectangle(new Point(4, 119), new Size(18, 56)));
                                      spriteSheet.SetSpriteSheet("naruto", 9, new Rectangle(new Point(35, 121), new Size(21, 54)));
                                      spriteSheet.SetSpriteSheet("naruto", 10, new Rectangle(new Point(68, 120), new Size(18, 55)));
                                      spriteSheet.SetSpriteSheet("naruto", 11, new Rectangle(new Point(99, 121), new Size(21, 54)));
                          
                                      //direction down
                                      spriteSheet.SetSpriteSheet("naruto", 12, new Rectangle(new Point(1, 183), new Size(25, 53)));
                                      spriteSheet.SetSpriteSheet("naruto", 13, new Rectangle(new Point(35, 184), new Size(22, 52)));
                                      spriteSheet.SetSpriteSheet("naruto", 14, new Rectangle(new Point(66, 183), new Size(23, 53)));
                                      spriteSheet.SetSpriteSheet("naruto", 15, new Rectangle(new Point(98, 184), new Size(22, 52)));
                                      #endregion
                          
                          
                                  }
                              }
                          }
                          
                        </code>
                      </pre>
                    </p>
                    <p><button type="button" class="btn btn-primary" onclick="window.location = '19-converting-color.html'">Next Chapter 18. Sprite Sheet>></button></p>
                  </div>
                </div>
              </div>
              <!----Summary---->
              <div class="col-md-2 skills-bar">
                <p style="color: cadetblue; font-size: 20px;">Summary</p>
                <p><a href="description.html">Description</a></p>
                <p><a href="01-initializing.html">01. Initializing MELHARFI engine</a></p>
                <p><a href="02-superposition.html">02. Superposition and ZIndex</a></p>
                <p><a href="03-drawing-classes.html">03. Drawing classes</a></p>
                <p><a href="04-bmp.html">04. Bmp (Bitmap)</a></p>
                <p><a href="05-rec.html">05. Rec (Rectangle)</a></p>
                <p><a href="06-anim.html">06. Anim (Animation)</a></p>
                <p><a href="07-txt.html">07. Txt (Text)</a></p>
                <p><a href="08-fillpolygon.html">08. FillPolygon (shapes)</a></p>
                <p><a href="09-error.html">09. Error handling</a></p>
                <p><a href="10-mouse-events.html">10. Mouse events</a></p>
                <p><a href="11-controls.html">11. Controls and ControlLayer</a></p>
                <p><a href="12-remove-clear-fixedObjectLayer.html">12. Remove,Clear and FixedObjectLayer</a></p>
                <p><a href="13-cryptography.html">13. Cryptography</a>></p>
                <p><a href="14-show-hide.html">14. Show, Hide</a></p>
                <p><a href="15-igfx.html">15. Interface IGfx</a></p>
                <p><a href="16-tag.html">16. Tag</a></p>
                <p><a href="17-childs.html">17. Childs</a></p>
                <p><b>>>18. Sprite Sheet</b></p>
                <p><a href="19-converting-color.html">19. Converting color</a></p>
                <p><a href="20-astar.html">20. AStar pathfinding</a></p>
                <p><a href="21-lidgren.html">21. LidgrenNetwork</a></p>
                <p><a href="22-drawing-surface.html">22. Drawing Surface</a></p>
                <p><a href="23-flickering.html">23. Flickering issue</a></p>
              </div>
              <!----End Summary---->
            </div>
          </div>
        </section>
        <!----Services---->
        <section id="services">
          <div class="container">
            <h1>Services</h1>
            <div class="row services">
              <div class="col-md-3 text-center">
                <div class="icon">
                  <i class="fa fa-desktop"></i>
                </div>
                <h3>App Developpement</h3>
                <p>Want me to dev an app for you ? dont hesitate to contact me.</p>
              </div>
              <div class="col-md-3 text-center">
                <div class="icon">
                  <i class="fa fa-code" aria-hidden="true"></i>
                </div>
                <h3>Programming</h3>
                <p>Are you looking for a coder/teammate for your project ? Let's give it a try.</p>
              </div>
              <div class="col-md-3 text-center">
                <div class="icon">
                  <i class="fa fa-users" aria-hidden="true"></i>
                </div>
                <h3>Job Invitation</h3>
                <p>Have a proposal for me ? we can discuss about it.</p>
              </div>
              <div class="col-md-3 text-center">
                <div class="icon">
                  <i class="fa fa-cc-paypal"></i>
                </div>
                <h3>Donation maybe ?!</h3>
                <p>You want to buy me a coffe ? m.elharfi@gmail.com</p>
                <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
                  <input type="hidden" name="cmd" value="_s-xclick" />
                  <input type="hidden" name="hosted_button_id" value="VN92ND2CDMX92" />
                  <input type="image" src="https://www.paypalobjects.com/en_US/FR/i/btn/btn_donateCC_LG.gif" border="0" name="submit" title="PayPal - The safer, easier way to pay online!" alt="Donate with PayPal button" />
                  <img alt="" border="0" src="https://www.paypal.com/en_FR/i/scr/pixel.gif" width="1" height="1" />
                  </form>
                  
              </div>
            </div>
          </div>
        </section>
        <!----End Services-->
        <!----Image click to enlarge---->
        <!-- Trigger the Modal -->
        <!-- The Modal -->
        <div id="myModal" class="modal">
          <!-- The Close Button -->
          <span class="modalClose" onclick="CloseSpan()">&times;</span>
          <!-- Modal Content (The Image) -->
          <img id="newMyImg" class="modal-content">
          <!-- Modal Caption (Image Text) -->
          <div id="caption"></div>
        </div> 
        <!--------End image click to enlarge-------->
    </body>
</html>

<script language="javascript">
//button toggle show/hide div
function myFunction()
{
  var x = document.getElementById("myDIV");
  if (x.style.display === "none")
  {
    x.style.display = "block";
  }
  else
  {
    x.style.display = "none";
  }
} 
///////////Modal////////////
//https://www.w3schools.com/howto/howto_css_modal_images.asp
var span = document.getElementsByClassName("modalClose");
var modal = document.getElementById("myModal");
var modalImg = document.getElementById("newMyImg");
function ShowModalImage(myImg)
{
  // Get the image and insert it inside the modal - use its "alt" text as a caption
  var img = document.getElementById(myImg);
  var captionText = document.getElementById("caption");
  modal.style.display = "block";
  modalImg.src = img.src;
  captionText.innerHTML = img.alt;
}
function CloseSpan()
{
  modal.style.display = "none";
}
/***Detect Esc btton to close Modal***/
document.addEventListener('keydown', function(event){
	if(event.key === "Escape"){
		CloseSpan()
	}
});
/***Hide modal when mouse clic***/
modal.onclick = function(){
		CloseSpan()
};
/////////////////////////////////////////
</script>