<html>
    <head>
        <title>MELHARFI 2D Game Engine - 12. Remove, Clear and FixedObjectLayer</title>
        <link rel="stylesheet" href="../../style.css">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>

        <link rel="stylesheet" href="../../highlight/styles/dracula.css">
        <script src="../../highlight/highlight.pack.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
    </head>
    <body>
        <!----NavigationBar---->
        <section id="nav-bar">
            <nav class="navbar navbar-expand-lg navbar-light">
                <a class="navbar-brand" href="#"><img src="../../img/logo.jpg"></a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
                  <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                  <div class="navbar-nav ml-auto">
                    <a class="nav-item nav-link" href="https://melharfi.github.io/index.html">HOME</a>
                    <a class="nav-item nav-link" href="https://melharfi.github.io/index.html"><b>REPOS</b></a>
                  </div>
                </div>
              </nav>
        </section>
        <!----Slider---->
        <div id="slider">
            <div id="headerSlider" class="carousel slide" data-ride="carousel">
                <ol class="carousel-indicators">
                  <li data-target="#headerSlider" data-slide-to="0" class="active"></li>
                  <li data-target="#headerSlider" data-slide-to="1"></li>
                  <li data-target="#headerSlider" data-slide-to="2"></li>
                </ol>
                <div class="carousel-inner">
                  <div class="carousel-item active">
                    <img src="../../img/1.jpg" class="d-block img-fluid w-100">
                    <div class="carousel-caption">
                      <h5>Welcome to The-Morpher Github Page</h5>
                    </div>
                  </div>
                  <div class="carousel-item">
                    <img src="../../img/2.jpg" class="d-block img-fluid w-100">
                    <div class="carousel-caption">
                      <h5>Love programming and discover new technologies</h5>
                    </div>
                  </div>
                  <div class="carousel-item">
                    <img src="../../img/3.jpg" class="d-block img-fluid w-100">
                    <div class="carousel-caption">
                      <h5>All my repos is shared</h5>
                    </div>
                  </div>
                  <div class="carousel-item">
                    <img src="../../img/4.jpg" class="d-block img-fluid w-100">
                    <div class="carousel-caption">
                      <h5>Feel free to give me a hint if anything need a tweak</h5>
                    </div>
                  </div>
                </div>
                <a class="carousel-control-prev" href="#headerSlider" role="button" data-slide="prev">
                  <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                  <span class="sr-only">Previous</span>
                </a>
                <a class="carousel-control-next" href="#headerSlider" role="button" data-slide="next">
                  <span class="carousel-control-next-icon" aria-hidden="true"></span>
                  <span class="sr-only">Next</span>
                </a>
              </div>
        </div>
        <!----Repos---->
        <section id="repos">
          <div class="container">
            <div class="row">
              <div class="col-md-10">
                <h2>Repos</h2>
                <div class="repos-content">
                  <div class="repos-content-job-title" style="color: darkcyan;">
                    <p><img src="https://raw.githubusercontent.com/melharfi/MELHARFI-2D-Game-Engine/master/assets/logo.png"></p>
                    <b>MELHARFI-2D-Game-Engine.</b>
                  </div>
                  <div class="repos-content-sub">
                    <p><a href="https://github.com/melharfi/MELHARFI-2D-Game-Engine" target="blank"><i class="fa fa-github" aria-hidden="true"></i>Got to repo.</a></p>
                    <p><b><h3>12. Remove, Clean, FixedObjectLayer</h3></b></p>
                    <p><b>Remove object</b></p>
                    <p>When you want to remove an object from screen like an enemy or whatever object, you must remove it from the layer where it's stored.</p>
                    <p>If it's a background object so you should look for it in <b>Manager.manager.GfxBgrList</b>, and so on for the other layers.</p>
                    <p>Let's suppose you have made an object as follow</p>

                    <p>
                      <pre>
                        <code class="csharp">
using System;
using System.Drawing;
using System.Windows.Forms;
using MELHARFI.Manager;
using MELHARFI.Manager.Gfx;

namespace _2dProject
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();

            Manager manager = new Manager(this, "manager");
            Bmp img1 = new Bmp(@"supermario.png", new Point(100, 200), "supermario", Manager.TypeGfx.Object, true, manager);
            manager.ObjectLayer.Add(img1);
        }
    }
}
                        </code>
                      </pre>
                    </p>

                    <p>After some events you want to remove that object from the game you just need to do as follow : </p>
                    <p>But the best way is add control programatically not by drag and drop, yet nothing stop you to do so.</p>
                    <p>
                      <pre>
                        <code class="csharp">
namespace _2dProject
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();

            Manager manager = new Manager(this, "manager");
            Bmp img1 = new Bmp(@"supermario.png", new Point(100, 200), "supermario", Manager.TypeGfx.Object, true, manager);
            manager.ObjectLayer.Add(img1);
        }
    }
}

                        </code>
                      </pre>
                    </p>

                    <p>Pay attention that object img1 must be declared in the same scoop, im mean the code bellow is working : </p>
                    <p>
                      <pre>
                        <code class="csharp">
namespace _2dProject
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();

            Manager manager = new Manager(this, "manager");
            Bmp img1 = new Bmp(@"supermario.png", new Point(100, 200), "supermario", Manager.TypeGfx.Object, true, manager);
            manager.ObjectLayer.Add(img1);

            manager.ObjectLayer.Remove(img1);
        }
    }
}
                        </code>
                      </pre>
                    </p>
                    
                    <p>The object is removed just after it's added, and it did work because the variable img is known cause we are in the same scope of block-code.</p>
                    <p>What happen if you are out of that scope, like if you are in another class, then the object img1 is know recognized.</p>
                    <p>The code bellow will rise an exception</p>

                    <p>
                      <pre>
                        <code class="csharp">
using System;
using System.Drawing;
using System.Windows.Forms;
using MELHARFI.Manager;
using MELHARFI.Manager.Gfx;

namespace _2dProject
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();

            Manager manager = new Manager(this, "manager");
            Bmp img1 = new Bmp(@"supermario.png", new Point(100, 200), "supermario", Manager.TypeGfx.Object, true, manager);
            manager.ObjectLayer.Add(img1);
            manager.ObjectLayer.Remove(img1);

            deletePlayer(manager);
        }

        private void deletePlayer(Manager manager)
        {
            manager.ObjectLayer.Remove(img1); /// error in this line, cause it does not exist in the current context (out of its declaration scope)
        }
    }
}
                        </code>
                      </pre>
                    </p>

                    <p>And here is handy using of the <b>Name</b> property of an object, meaning with that you can look for it in the layer and then remove it by its name as follow :</p>
                    <p>
                      <pre>
                        <code class="csharp">
using System;
using System.Drawing;
using System.Windows.Forms;
using MELHARFI.Manager;
using MELHARFI.Manager.Gfx;

namespace _2dProject
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();

            Manager manager = new Manager(this, "manager");
            Bmp img1 = new Bmp(@"supermario.png", new Point(100, 200), "supermario", Manager.TypeGfx.Object, true, manager);
            manager.ObjectLayer.Add(img1);
            manager.ObjectLayer.Remove(img1);

            deletePlayer(manager);
        }

        private void deletePlayer(Manager manager)
        {
            manager.ObjectLayer.RemoveAll(f => f.Name == "supermario");
            
        }
    }
}
                          
                        </code>
                      </pre>
                    </p>
                    <p>If you don't associate a name to an object then you can't remove it or deal with cause you lost your identification name.</p>

                    <b><li>Cleaning Objects</li></b>
                    <p>In case you want to clear all objects from screen depending on witch layer you want, you just use this:</p>
                    <p><b>manager.BackgroundLayer.Clear();</b></p>
                    <p><b>manager.ObjectLayer.Clear();</b></p>
                    <p><b>manager.TopLayer.Clear();</b></p>
                    <p>Otherwize if you want to clear all layers :</p>
                    <p><b>manager.TopLayer.Clear();</b></p>
                    <p><b>manager.Clear();</b></p>
                    <p><b><li>FixedObjectLayer</li></b></p>
                    <p>First let's talk about a situation could happen to you, because it was the case for me in my RPG game.</p>
                    <p>Admitting that we have map full of objects and players ..., and you want your player to move to the other screen (next map),</p>
                    <p>In that point of time you should clean the full screen of objects and players because you are moving to another map with its own object and different players.</p>
                    <p>You do so you can use the 4 lines of codes shown before to clean the map, BUT what about some important stuff like your life point, you information, stats, hud ...</p>
                    <p>These informations should not be removed and should remain fixed on the screen whatever you do unless if you use many instance of Game Engine, but assuming you use only one instance for all your stuff.</p>
                    <p>Maybe you can use your own logic by checking every object and decide if you want to keep it or not, but it's going to need a lot of conditions and not really what we want cause we are lazy :)</p>
                    <p>To escape that issue, i made another layer <b>FixedObjectLayer</b> to store every important object that you don't want to be removed.</p>
                    <p>Let's add a text control a slife point that we want it to be as Fixed object </p>

                    <p>
                      <pre>
                        <code class="csharp">
using System;
using System.Drawing;
using System.Windows.Forms;
using MELHARFI.Manager;
using MELHARFI.Manager.Gfx;

namespace _2dProject
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();

            Manager manager = new Manager(this, "manager");
            manager.Background = Color.CadetBlue;

            Bmp supermario = new Bmp(@"supermario.png", new Point(100, 200), "supermario", Manager.TypeGfx.Object, true, manager);
            manager.ObjectLayer.Add(supermario);

            Txt lifePoints = new Txt("Life points : 5", new Point(0, 0), "lifePoint", Manager.TypeGfx.Top, true, new Font("Verdana", 10, FontStyle.Bold), Brushes.Black, manager);
            manager.TopLayer.Add(lifePoints);
            manager.FixedObjectLayer.Add(lifePoints);   // <-- fixing object
        }
    }
}

                        </code>
                      </pre>
                    </p>
                    <p><img src = "assets/fixedObject.PNG"></p>
                    <p>if we clean screen using : </p>
                    <p>
                      <pre>
                        <code class="csharp">
using System;
using System.Drawing;
using System.Linq;
using System.Windows.Forms;
using MELHARFI.Manager;
using MELHARFI.Manager.Gfx;

namespace _2dProject
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();

            Manager manager = new Manager(this, "manager");
            manager.Background = Color.CadetBlue;

            Bmp supermario = new Bmp(@"supermario.png", new Point(100, 200), "supermario", Manager.TypeGfx.Object, true, manager);
            manager.ObjectLayer.Add(supermario);

            Txt lifePoints = new Txt("Life points : 5", new Point(0, 0), "lifePoint", Manager.TypeGfx.Top, true, new Font("Verdana", 10, FontStyle.Bold), Brushes.Black, manager);
            manager.TopLayer.Add(lifePoints);
            manager.FixedObjectLayer.Add(lifePoints);   // <-- fixing object
            cleanScreen();
        }

        private void cleanScreen()
        {
            // catching manager in out of its declaration scope.
            Manager manager = Manager.Managers.First(f => f.Name == "manager");
            manager.Clear();
        }
    }
}
                        </code>
                      </pre>
                    </p>

                    <p><img src ="assets/fixedObject2.PNG"></p>
                    <p><button type="button" class="btn btn-primary" onclick="window.location = '13-cryptography.html'">Next Chapter 13. Cryptography>></button></p>
                  </div>
                </div>
              </div>
              <!----Summary---->
              <div class="col-md-2 skills-bar">
                <p style="color: cadetblue; font-size: 20px;">Summary</p>
                <p><a href="description.html">Description</a></p>
                <p><a href="01-initializing.html">01. Initializing MELHARFI engine</a></p>
                <p><a href="02-superposition.html">02. Superposition and ZIndex</a></p>
                <p><a href="03-drawing-classes.html">03. Drawing classes</a></p>
                <p><a href="04-bmp.html">04. Bmp (Bitmap)</a></p>
                <p><a href="05-rec.html">05. Rec (Rectangle)</a></p>
                <p><a href="06-anim.html">06. Anim (Animation)</a></p>
                <p><a href="07-txt.html">07. Txt (Text)</a></p>
                <p><a href="08-fillpolygon.html">08. FillPolygon (shapes)</a></p>
                <p><a href="09-error.html">09. Error handling</a></p>
                <p><a href="10-mouse-events.html">10. Mouse events</a></p>
                <p><a href="11-controls.html">11. Controls and ControlLayer</a></p>
                <p><b>>>12. Remove,Clear and FixedObjectLayer</b></p>
                <p><a href="13-cryptography.html">13. Cryptography</a></p>
                <p><a href="14-show-hide.html">14. Show, Hide</a></p>
                <p><a href="15-igfx.html">15. Interface IGfx</a></p>
                <p><a href="16-tag.html">16. Tag</a></p>
                <p><a href="17-childs.html">17. Childs</a></p>
                <p><a href="18-sprite-sheet.html">18. Sprite Sheet</a></p>
                <p><a href="19-converting-color.html">19. Converting color</a></p>
                <p><a href="20-astar.html">20. AStar pathfinding</a></p>
                <p><a href="21-lidgren.html">21. LidgrenNetwork</a></p>
                <p><a href="22-drawing-surface.html">22. Drawing Surface</a></p>
                <p><a href="23-flickering.html">23. Flickering issue</a></p>
              </div>
              <!----End Summary---->
            </div>
          </div>
        </section>
        <!----Services---->
        <section id="services">
          <div class="container">
            <h1>Services</h1>
            <div class="row services">
              <div class="col-md-3 text-center">
                <div class="icon">
                  <i class="fa fa-desktop"></i>
                </div>
                <h3>App Developpement</h3>
                <p>Want me to dev an app for you ? dont hesitate to contact me.</p>
              </div>
              <div class="col-md-3 text-center">
                <div class="icon">
                  <i class="fa fa-code" aria-hidden="true"></i>
                </div>
                <h3>Programming</h3>
                <p>Are you looking for a coder/teammate for your project ? Let's give it a try.</p>
              </div>
              <div class="col-md-3 text-center">
                <div class="icon">
                  <i class="fa fa-users" aria-hidden="true"></i>
                </div>
                <h3>Job Invitation</h3>
                <p>Have a proposal for me ? we can discuss about it.</p>
              </div>
              <div class="col-md-3 text-center">
                <div class="icon">
                  <i class="fa fa-cc-paypal"></i>
                </div>
                <h3>Donation maybe ?!</h3>
                <p>You want to buy me a coffe ? m.elharfi@gmail.com</p>
                <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
                  <input type="hidden" name="cmd" value="_s-xclick" />
                  <input type="hidden" name="hosted_button_id" value="VN92ND2CDMX92" />
                  <input type="image" src="https://www.paypalobjects.com/en_US/FR/i/btn/btn_donateCC_LG.gif" border="0" name="submit" title="PayPal - The safer, easier way to pay online!" alt="Donate with PayPal button" />
                  <img alt="" border="0" src="https://www.paypal.com/en_FR/i/scr/pixel.gif" width="1" height="1" />
                  </form>
                  
              </div>
            </div>
          </div>
        </section>
        <!----End Services-->
        <!----Image click to enlarge---->
        <!-- Trigger the Modal -->
        <!-- The Modal -->
        <div id="myModal" class="modal">
          <!-- The Close Button -->
          <span class="modalClose" onclick="CloseSpan()">&times;</span>
          <!-- Modal Content (The Image) -->
          <img id="newMyImg" class="modal-content">
          <!-- Modal Caption (Image Text) -->
          <div id="caption"></div>
        </div> 
        <!--------End image click to enlarge-------->
    </body>
</html>

<script language="javascript">
//button toggle show/hide div
function myFunction()
{
  var x = document.getElementById("myDIV");
  if (x.style.display === "none")
  {
    x.style.display = "block";
  }
  else
  {
    x.style.display = "none";
  }
} 
///////////Modal////////////
//https://www.w3schools.com/howto/howto_css_modal_images.asp
var span = document.getElementsByClassName("modalClose");
var modal = document.getElementById("myModal");
var modalImg = document.getElementById("newMyImg");
function ShowModalImage(myImg)
{
  // Get the image and insert it inside the modal - use its "alt" text as a caption
  var img = document.getElementById(myImg);
  var captionText = document.getElementById("caption");
  modal.style.display = "block";
  modalImg.src = img.src;
  captionText.innerHTML = img.alt;
}
function CloseSpan()
{
  modal.style.display = "none";
}
/***Detect Esc btton to close Modal***/
document.addEventListener('keydown', function(event){
	if(event.key === "Escape"){
		CloseSpan()
	}
});
/***Hide modal when mouse clic***/
modal.onclick = function(){
		CloseSpan()
};
/////////////////////////////////////////
</script>